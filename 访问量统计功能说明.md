# 访问量统计功能说明

## 功能概述
轻量化、无侵入性的外部访问量统计功能，仅统计除本人外的HR和其他访客访问量，数据通过CountAPI永久保存，支持跨设备同步。

## 使用说明（100字内）
**查看访问量**：点击页面左下角区域即可显示/隐藏访问量数字  
**修改本人IP**：打开`visit-stats.js`第19行，修改`MY_IP_WHITELIST`的IP值  
**关闭统计功能**：修改`visit-stats.js`第12行，将`VISIT_STATS_ENABLED`改为`false`

## 技术实现

### 核心配置
```javascript
// 本人公网IP白名单
const MY_IP_WHITELIST = '61.242.135.212';

// CountAPI实时数据查看地址
https://api.countapi.xyz/get/zengzhongxian/portfolio-views
```

### 统计规则
- **排除本人**：本人IP访问不计入统计（IP白名单机制）
- **精确计数**：同一访客24小时内多次访问计多次（不做去重）
- **跨设备同步**：数据存储在CountAPI云端，永久保存

### 交互设计
- **显示位置**：页面左下角100px宽区域
- **默认状态**：完全隐藏，无任何视觉痕迹
- **触发方式**：点击左下角区域平滑显示/隐藏（0.2s过渡动画）
- **视觉风格**：浅灰文字(#999999)，12px字号，保持黑白灰风格

### 文件结构
```
Xe/
├── index.html          # 添加了访问统计区域HTML
├── styles.css          # 添加了统计区域CSS样式
├── script.js           # 原有功能脚本（未修改）
├── visit-stats.js      # 访问量统计独立脚本
└── 访问量统计功能说明.md
```

## 实时数据查看方式

### 1. 网页内查看
- 访问网页，点击左下角区域显示访问量

### 2. 浏览器直接查看
在浏览器地址栏输入以下地址查看实时数据：
```
https://api.countapi.xyz/get/zengzhongxian/portfolio-views
```

### 3. 返回数据格式
```json
{
  "value": 15,
  "namespace": "zengzhongxian",
  "key": "portfolio-views"
}
```

## 修改指南

### 修改本人IP
1. 打开 `visit-stats.js` 文件
2. 找到第19行：`const MY_IP_WHITELIST = '61.242.135.212';`
3. 将IP地址替换为新的公网IP

### 关闭统计功能
1. 打开 `visit-stats.js` 文件
2. 找到第12行：`const VISIT_STATS_ENABLED = true;`
3. 将 `true` 改为 `false`

### 更新CountAPI配置
如需重置计数器，修改以下变量：
- `COUNTAPI_NAMESPACE`：命名空间
- `COUNTAPI_KEY`：计数键名

## 技术特性

### 轻量化设计
- 脚本体积：<1KB
- 加载优先级：低（延迟1秒加载）
- 性能影响：几乎为零

### 兼容性
- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 12+
- ✅ Edge 79+
- ✅ 移动端浏览器

### 无侵入性
- 不修改原有HTML/CSS/JS结构
- 不影响页面加载速度
- 不破坏原有交互功能
- 保持黑白灰高级风格

### 数据安全
- 无需注册任何账户
- 数据存储在CountAPI公共服务
- 支持跨设备访问同步
- 数据永久保存（除非手动重置）

## 故障排除

### 点击左下角无反应
1. **检查点击区域**：点击页面左下角10px位置的区域
2. **查看控制台**：按F12打开开发者工具，查看是否有错误信息
3. **验证脚本加载**：检查控制台是否显示"访问量统计：DOM元素已找到"
4. **测试页面**：可访问`test-visit.html`测试基本功能

### 访问量不更新
1. 检查网络连接
2. 确认CountAPI服务可用性
3. 查看浏览器控制台错误信息

### 本地IP不准确
1. 清除浏览器缓存
2. 使用VPN测试不同IP
3. 检查IP白名单配置

### 显示异常
1. 确认CSS样式加载
2. 检查JavaScript控制台
3. 验证DOM元素存在性

### 访问量为0也要显示
- 系统已修复此问题，即使访问量为0也会正确显示
- 可通过点击左下角区域立即查看当前统计

---

**注意**：本功能完全独立于主网站，可随时启用或关闭，不影响求职网站的核心功能和美观。